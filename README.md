# qqzeng-ip 项目文档


## 项目简介  
**qqzeng-ip** 是一个高性能的IP地址数据库解析工具，专注于快速查询全球IP地址的归属地信息。支持多语言开发与灵活的数据格式，适用于多种场景。

---
## 新版格式  CIDR
 数据库：cidr，地区信息，运营商信息，等多维结构    
 二进制：文件小，高效率，多种语言解析查询 .db
 
## CIDR vs IP Range

- **简化表示**：  
  使用“IP 地址/前缀长度”（如 `192.168.1.0/24`），比传统起止 IP 范围更简洁。   
  单个 IP 地址仍保留为单一值（不需要添加后缀 /32 或 /128）

- **无缝集成**：  
  现代网络工具、防火墙和数据库直接支持 CIDR，降低配置复杂性。

- **简化计算**：  
  地址总数和子网划分计算更直观高效。

- **提高准确性**：  
  前缀追踪减少 IP 分配重叠和错误。

- **降低复杂性**：  
  单列替代多列设计，查询和管理更简单。

- **面向未来**：  
  原生支持 CIDR 数据类型，确保长期兼容性，IPv4和IPv6。



## 核心内容  

### 1. 数据库版本与格式  
| **分类**          | **描述**                                                                 |
|--------------------|--------------------------------------------------------------------------|
| **全球旗舰版**     | 覆盖国内外IP，含港澳台及240+国家/地区的省市区、运营商、经纬度信息。        |
| **国内精华版**     | 聚焦中国内地及港澳台的省市区、运营商信息。                                |
| **国外拓展版**     | 细化国外240+国家/地区，大部分城市、运营商 数据。                          |
| **CIDR掩码版**     | 支持路由协议等场景的掩码分组优化格式。                                    |

| **数据格式**       | **特点**                                                                 |
|--------------------|--------------------------------------------------------------------------|
| DAT格式            | 文件小（10几M），查询性能达纳微秒级解析。                                  |
| TXT格式            | 一两百M，支持导入MySQL/MSSQL，便于灵活扩展处理。                           |

#### [3.0版本](https://github.com/zengzhan/qqzeng-ip/tree/master/3.0)只适用全球旗舰版，文件更小，查询更快，内存版性能每秒过千万级 
---

### 2. 数据维度与覆盖  
- **字段信息**  
  大洲、国家（中英文）、省份、城市、县区、运营商、行政代码、经纬度等。  
### 数据质量  
- **精准度**  
  - 中国省份 >99.9% / 城市 >97.8%  
- **覆盖度**  
  - 全球范围：241个国家和地区（含中国全量城市）  
  - 行政细化：上万个国外州/邦/省/郡/道级行政区     
  - 网络覆盖：电信、联通、移动、阿里云、腾讯云、华为云、百度云等几千个国内外服务商。    
  - 国内线路：电信/联通/移动铁通·教育网·广电等2000+运营商  
  - 国际网络：覆盖5000+海外服务商  
---

### 4. 多语言与扩展支持  
- **开发语言**  
  C/C++、Java、C#、Python、Go、Rust、NodeJs、Php 等十余种语言。  
- **数据库集成**  
  MySQL/MSSQL/PgSQL/Redis 脚本支持，批量导入与查询。  

---

### 5. 应用场景  

（1）IP智能切换城市，用户智能跳转到用户所在城市内容模块。  
（2）根据ip区域化为不同区域提供内容个性化，实现差异化策略。  
（3）区域化精准的广告投放，根据客户群定制广告，依赖于IP地址库的准确性。  
（4）高效流量调度、智能DNS服务、 网络服务质量监测等方面起到重要的作用。  
（5）流量统计分析，了解访问效果和用户行为，为进一步修正或重新制定网络营销策略提供依据。  
（6）精确的定位数据可以帮助定位用户精确位置、分析区域数据、判断不同地域用户人群的行为习惯、为用户提供个性化的服务、精确定点投放业务广告，实现准确操作，提升用户体验，节约运营成本    

客户已经涉及很多领域，包括 电子商务、门户、杀毒、网游、广告、旅游、流量分析、站点供应商及各领域公司和企业

#### 智能应用  
- 󠀠󠀠**精准分发**：基于地理围栏的差异化内容/优惠策略  
- 󠀠󠀠**广告优化**：区域定点投放降低30%+运营成本（依托高精度库）  
- 󠀠󠀠**网络治理**：智能DNS·流量调度·服务质量监测体系  
- 󠀠󠀠**数据洞察**：地域流量画像支撑网络营销策略  

#### 行业服务  
- **核心领域**：地理识别·网络安全·CDN·电商  
- **扩展场景**：政务监管·旅游定位·物流调度·IoT设备管理  

---



## 手机号段归属地-多语言解析以及导入数据库脚本

qqzeng-phone-6.0.dat    [6.0版本](https://github.com/zengzhan/qqzeng-ip/tree/master/qqzeng-phone-6.0)   

字段信息：  
广东|深圳|518000|0755|440300|移动   

编码：UTF8  字节序：Little-Endian  


### 存储与性能

#### 🗜️ 极致压缩  
| **版本** | **格式** | **体积** | **压缩率** |  
|----------|----------|----------|-------------|  
| 原始数据 | TXT      | 30 MB    | -           |  
| v6.0     | DAT      | 1.28 MB  | ▸ 95.7%     |  
| v3.0     | DAT      | 1.95 MB  | ▸ 93.5%     |  
| v2.0     | DAT      | 2.40 MB  | ▸ 92.0%     |  

#### ⚡ 性能突破  
- **解析速度**：超5,000万次/秒（较传统方案快200%）  
- **资源占用**：内存消耗<10MB，适配高并发场景  
- **架构优势**：二进制DAT格式实现近O(1)时间复杂度查询   

### 号段归属地查询性能对比（2.0-6.0版本）

#### 测试环境
- **硬件**：Apple M4 Max，14核 CPU
- **操作系统**：macOS x64
- **年份**：2025

#### 时间复杂度
- **范围**：O(log n) 到 O(1)

#### 性能数据

#### 版本 2.0 (qqzeng-phone-2.0.dat)
| 查询次数（万） | 时间（秒） | 每秒查询次数（万次）          |
|----------------|------------|-------------------------------|
| 8932           | 6.682      | 1336.7255312780603           |
| 11310          | 8.235      | 1373.4061930783243           |
| 11136          | 8.24       | 1351.4563106796115           |
| 8526           | 6.176      | 1380.5051813471503           |
| 10962          | 7.917      | 1384.6153846153848           |
| 11020          | 7.947      | 1386.6868000503334           |
| 7192           | 5.17       | 1391.10251450677             |

**平均每秒查询次数**：约 1380.79 万次

---

#### 版本 3.0 (qqzeng-phone-3.0.dat)
| 查询次数（万） | 时间（秒） | 每秒查询次数（万次）          |
|----------------|------------|-------------------------------|
| 8236           | 2.824      | 2916.43059490085             |
| 9280           | 3.129      | 2965.803771172899            |
| 6902           | 2.315      | 2981.4254859611233           |
| 7424           | 2.565      | 2894.346978557505            |
| 11426          | 3.931      | 2906.6395319257185           |
| 6496           | 2.251      | 2885.8285206574856           |
| 11252          | 3.849      | 2923.3567160301377           |

**平均每秒查询次数**：约 2924.97 万次

---

#### 版本 4.0 (qqzeng-phone-4.0.dat)
| 查询次数（万） | 时间（秒） | 每秒查询次数（万次）          |
|----------------|------------|-------------------------------|
| 7308           | 1.201      | 6084.929225645295            |
| 5800           | 0.954      | 6079.664570230609            |
| 7308           | 1.186      | 6161.888701517707            |
| 8352           | 1.328      | 6289.156626506024            |
| 9860           | 1.582      | 6232.616940581542            |
| 9802           | 1.57       | 6243.312101910828            |
| 7018           | 1.14       | 6156.140350877194            |

**平均每秒查询次数**：约 6178.24 万次

---

#### 版本 5.0 (qqzeng-phone-5.0.dat)
| 查询次数（万） | 时间（秒） | 每秒查询次数（万次）          |
|----------------|------------|-------------------------------|
| 7888           | 0.376      | 20978.723404255317           |
| 11136          | 0.529      | 21051.039697542532           |
| 6322           | 0.296      | 21358.10810810811            |
| 7366           | 0.346      | 21289.017341040464           |
| 9512           | 0.449      | 21184.855233853006           |
| 8410           | 0.395      | 21291.139240506327           |
| 6728           | 0.313      | 21495.20766773163            |

**平均每秒查询次数**：约 21235.44 万次

---

#### 版本 6.0 (qqzeng-phone-6.0.db)
| 查询次数（万） | 时间（秒） | 每秒查询次数（万次）          |
|----------------|------------|-------------------------------|
| 6786           | 0.409      | 16591.687041564794           |
| 9106           | 0.544      | 16738.970588235294           |
| 8700           | 0.522      | 16666.666666666664           |
| 6844           | 0.41       | 16692.682926829268           |
| 9164           | 0.55       | 16661.81818181818            |
| 6496           | 0.385      | 16872.727272727272           |
| 9512           | 0.571      | 16658.493870402803           |

**平均每秒查询次数**：约 16683.29 万次

---

#### 观察结果
- **版本 5.0** 性能最佳，平均每秒查询约 21235.44 万次，远超其他版本。
- **版本 4.0** 相较 2.0 和 3.0 有显著提升，平均每秒查询约 6178.24 万次。
- **版本 6.0** 性能略低于 5.0，平均每秒查询约 16683.29 万次，但仍高效。
- 性能提升与数据结构或算法优化相关，后期版本的查询时间接近 **O(1)**。

---

演示  https://www.qqzeng.com/ip

统计  https://www.qqzeng.com/tongji.html

官网  https://www.qqzeng.com   

# 未来  
**qqzeng-ip** 我们持续更新和完善数据库，以提供更加准确和精细，高性能的产品。

![Image text](https://www.qqzeng-ip.com/res/github-qrcode.png)




